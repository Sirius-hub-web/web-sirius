<!DOCTYPE html>
<html>
<head>
    <title>Prueba Formulario</title>
</head>
<body>
    <h1>PRUEBA FORMULARIO</h1>
    
    <div id="success-message" style="display:none; background:green; color:white; padding:10px;">
        ✅ ¡ÉXITO! Datos enviados
    </div>
    
    <div id="error-message" style="display:none; background:red; color:white; padding:10px;">
        ❌ ERROR
    </div>

    <form id="test-form">
        <input type="text" name="name" placeholder="Nombre" required>
        <input type="email" name="email" placeholder="Email" required>
        <textarea name="message" placeholder="Mensaje" required></textarea>
        <button type="submit">ENVIAR PRUEBA</button>
    </form>

    <script>
        document.getElementById('test-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = {
                name: this.name.value,
                email: this.email.value,
                message: this.message.value,
                partnerType: 'test'
            };
            
            console.log('Enviando:', formData);
            
            try {
                const response = await fetch('https://script.google.com/macros/s/AKfycbxXYsvXou0lYrZ-MOo4CkEGy3AvOdjEDpXUgRpKtx6JCDsAgtrsT2NUVvbaBcFRJ5ffPA/exec', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData)
                });
                
                console.log('Response status:', response.status);
                const result = await response.json();
                console.log('Response data:', result);
                
                if (result.result === 'success') {
                    document.getElementById('success-message').style.display = 'block';
                    this.reset();
                } else {
                    throw new Error(result.message);
                }
                
            } catch (error) {
                console.error('Error completo:', error);
                document.getElementById('error-message').style.display = 'block';
                document.getElementById('error-message').textContent = '❌ ERROR: ' + error.message;
            }
        });
    </script>
</body>
</html>
